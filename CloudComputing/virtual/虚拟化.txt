软件定义硬件

VMM

纯软件技术，纯硬件技术


理解和掌握虚拟化的概念和原理。

概念：是指通过虚拟化技术将一台计算机虚拟为多台逻辑计算机。在一台计算机上同时运行多个逻辑计算机，每个逻辑计算机可运行不同的操作系统，并且应用程序都可以在相互独立的空间内运行而互不影响，从而显著提高计算机的工作效率。

实质是对资源的再次抽象及软件的定义。

分为计算虚拟化，存储虚拟化和网络虚拟化

一、计算虚拟化：
1、计算虚拟化分类：
1).寄居虚拟化：在宿主机操作系统上进行虚拟化的，安装VMM
2).裸机虚拟化：直接在硬件上进行虚拟化，安装VMM
3).操作系统虚拟化(容器虚拟化)：在宿主机操作系统上进行虚拟化的，用Docker实现的。直接操作硬件，无需VMM等操作，

2、计算虚拟化实现方式：
1).CPU虚拟化：
2).内存虚拟化：
影子页表技术;EPT技术
3).I/O虚拟化：
由于在x86架构中存在虚拟化漏洞的，x86 ISA中有19条指令不是特权指令，因此x86无法使用经典的虚拟化技术完全虚拟化。
解决办法：
全虚拟化，半虚拟化，硬件辅助虚拟化。
CPU的虚拟化：
1).全虚是通过动态二进制翻译进行的，在VMM层面完成19条指令的转换，其它2).指令如果是特权指令，直接通过VMM转换，非特权指令直接调用硬件，不需3).要VMM转换。

半虚是HyperCall实现的。在操作系统上完成的19条指令的转换

硬件辅助虚拟化：在CPU中完成19条指令的转换


二、存储虚拟化：

1.分类：
1).按位置划分：基于主机的虚拟化，基于存储设备的虚拟化，基于存储网络的虚拟化。
2).按磁盘、磁带等角度来划分：磁盘的格式化或RAID0,1,5,6,等磁盘的虚拟化。RAID2.0+也是虚拟化的一种新技术，也是在RAID之后，再次的逻辑上的划分。
3).带内In-Band虚拟化和带外Out-of-Band虚拟化。

2.实现方式
1).基于主机的虚拟存储 
2).基于存储设备的虚拟存储 
3).基于网络的虚拟存储 


三、网络虚拟化：
1.分类
1).虚拟机内部虚拟网卡
2).服务器到网络的连接即虚拟交换机。
3).硬件设备虚拟化。
4).虚拟网络，包括层叠网络、虚拟专用网络、数据中心使用较多的虚拟二层延伸网络。

2.实现方式

1).虚拟机内部虚拟化网卡（主机层面）：
全虚，半虚和硬件辅助虚拟化

2).虚拟交换机（接入层面）；
由软件实现的全虚拟化，由网卡实现分布式交换技术；
由物理交换机实现的交换技术；

3).硬件设备虚拟化（汇聚层面）
一对多
多对一的设备堆叠，多个三层交换机

4).虚拟网络（数据中心层面）
XVLAN
NVGRE





